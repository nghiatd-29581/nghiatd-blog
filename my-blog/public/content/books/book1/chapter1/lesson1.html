<div class="lesson1-rust">

<style scoped>
/* === TOÀN BỘ CSS CHỈ ÁP DỤNG TRONG .lesson1-rust === */
.lesson1-rust {
    /* Biến CSS chỉ có hiệu lực bên trong */
    --bg: #ffffff;
    --text: #2d2d2d;
    --heading: #1a1a1a;
    --code-bg: #f6f8fa;
    --border: #e1e4e8;
    --primary: #0366d6;
    --green: #28a745;
    --red: #d73a49;
    --purple-gradient-start: #667eea;
    --purple-gradient-end: #764ba2;
    
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    line-height: 1.7;
    color: var(--text);
    background: var(--bg);
    max-width: 960px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
    box-sizing: border-box;
}

.lesson1-rust h1, 
.lesson1-rust h2, 
.lesson1-rust h3, 
.lesson1-rust h4 {
    color: var(--heading);
    font-weight: 600;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
}

.lesson1-rust h1 {
    font-size: 2.2rem;
    text-align: center;
    margin: 3rem 0 2rem;
    color: #0d47a1;
}

.lesson1-rust h1 small {
    font-size: 0.6em;
    color: #555;
}

.lesson1-rust h2 {
    font-size: 1.8rem;
    border-bottom: 3px solid var(--primary);
    padding-bottom: 0.5rem;
}

.lesson1-rust h3 {
    font-size: 1.5rem;
    color: var(--primary);
}

.lesson1-rust p {
    margin-bottom: 1.2rem;
}

.lesson1-rust ul, 
.lesson1-rust ol {
    margin: 1.2rem 0;
    padding-left: 2.2rem;
}

.lesson1-rust li {
    margin-bottom: 0.6rem;
}

.lesson1-rust strong {
    color: #1a1a1a;
}

.lesson1-rust code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    background: var(--code-bg);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-size: 90%;
}

.lesson1-rust pre {
    background: #2d2d2d;
    color: #f8f8f2;
    padding: 1.2rem;
    border-radius: 8px;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid #444;
    font-size: 0.95rem;
}

.lesson1-rust pre code {
    background: none;
    padding: 0;
    color: inherit;
    font-size: inherit;
}

.lesson1-rust table {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    background: #fafafa;
    border: 1px solid var(--border);
}

.lesson1-rust th, 
.lesson1-rust td {
    border: 1px solid var(--border);
    padding: 0.9rem 1.2rem;
    text-align: left;
}

.lesson1-rust th {
    background: var(--primary);
    color: white;
    font-weight: 600;
}

.lesson1-rust tr:nth-child(even) {
    background: #f6f8fa;
}

.lesson1-rust .note {
    background: #fff8e1;
    border-left: 5px solid #ff9800;
    padding: 1rem 1.2rem;
    margin: 1.5rem 0;
    border-radius: 0 4px 4px 0;
}

.lesson1-rust .tip {
    background: #e8f5e8;
    border-left: 5px solid #4caf50;
    padding: 1rem 1.2rem;
    margin: 1.5rem 0;
    border-radius: 0 4px 4px 0;
}

.lesson1-rust .section-title {
    font-size: 2rem;
    color: #d32f2f;
    text-align: center;
    margin: 3rem 0 2rem;
    font-weight: bold;
}

.lesson1-rust .summary {
    background: linear-gradient(135deg, var(--purple-gradient-start) 0%, var(--purple-gradient-end) 100%);
    color: white;
    padding: 2rem;
    border-radius: 12px;
    margin: 3rem 0;
}

.lesson1-rust .summary h3 {
    color: white;
    margin-top: 0;
}

.lesson1-rust .summary ul {
    margin: 1rem 0;
}

/* Responsive chỉ trong phạm vi lesson */
@media (max-width: 768px) {
    .lesson1-rust {
        padding: 1.5rem 1rem;
    }
    .lesson1-rust h1 { font-size: 1.9rem; }
    .lesson1-rust table, 
    .lesson1-rust pre {
        font-size: 0.9rem;
    }
}
</style>
<body>

    <h1>Chương 1 - Bài 1<br>
        <small style="font-size:0.6em; color:#555;">Từ C# sang RUST: Chinh phục Blockchain & Systems Programming</small>
    </h1>

    <p style="text-align:center; font-size:1.2rem; max-width:800px; margin:2rem auto; color:#424242;">
        Bạn là một <strong>C# Developer lão luyện</strong>, quen thuộc với sự tiện nghi của Visual Studio,<br>
        và bây giờ tôi mời bạn bước vào một <strong>“công xưởng” mới gọn gàng, mạnh mẽ</strong> mang tên <strong>Rust</strong>.
    </p>

    <div class="section-title">PHẦN 1: TƯ DUY CỐT LÕI & "CAI NGHIỆN" GC</div>

    <h2>CHƯƠNG 1: HELLO RUST & TOOLING</h2>

    <p>
        Chào mừng bạn đến với Rust. Nếu ở C#, bạn có một <strong>“người quản gia”</strong> tận tụy là Visual Studio làm hết mọi thứ từ tạo project, quản lý package (NuGet), build, test, đến deploy; thì ở Rust, bạn có một <strong>“trợ lý ảo” đa năng</strong> tên là <strong>Cargo</strong>.
    </p>

    <p>
        <strong>Cargo không chỉ là Package Manager. Cargo là trái tim của quy trình phát triển Rust.</strong>
    </p>

    <h2>BÀI 1: HỆ SINH THÁI CARGO VS. NUGET/SOLUTION</h2>

    <p>Trong bài này, chúng ta sẽ thiết lập môi trường và giải phẫu cấu trúc dự án để bạn thấy sự tương đồng (và khác biệt) giữa hai thế giới.</p>

    <h3>1. Cài đặt: Từ "Bộ cài khổng lồ" đến "Dòng lệnh tinh gọn"</h3>

    <ul>
        <li><strong>C# (.NET):</strong> Bạn thường tải Visual Studio Installer (vài GB), chọn workload .NET Desktop hoặc ASP.NET Core.</li>
        <li><strong>Rust:</strong> Chúng ta dùng <code>rustup</code> - trình quản lý phiên bản (tương tự nvm của Nodejs hay dotnet-install script, nhưng xịn hơn).</li>
    </ul>

    <div class="tip">
        <strong>Hướng dẫn Step-by-Step (Dành cho Windows):</strong>
        <ol>
            <li>Truy cập: <a href="https://rustup.rs" target="_blank">rustup.rs</a></li>
            <li>Tải xuống <code>rustup-init.exe</code>.</li>
            <li>Chạy file exe. Bạn sẽ thấy màn hình command line.<br>
                <span style="font-size:0.95em; color:#d32f2f;">
                    Lưu ý: Nó có thể yêu cầu bạn cài C++ Build Tools của Visual Studio (vì Rust trên Windows mặc định dùng MSVC linker để tương thích tốt nhất với hệ thống). Nếu bạn đã cài VS C++ workload rồi thì bỏ qua.
                </span>
            </li>
            <li>Nhấn <code>1</code> (Proceed with installation default) và Enter.</li>
            <li>Sau khi xong, mở Terminal (PowerShell hoặc CMD) và gõ:</li>
        </ol>
        <pre><code>cargo --version</code></pre>
        <p>Nếu thấy dòng chữ kiểu <code>cargo 1.75.0...</code> thì chúc mừng, bạn đã có Rust!</p>
    </div>

    <h3>2. Giải phẫu cấu trúc: Solution (.sln) vs. Workspace</h3>

    <p>Hãy so sánh cách tổ chức file khi khởi tạo một dự án mới.</p>

    <table>
        <tr>
            <th>Khái niệm C#</th>
            <th>Khái niệm Rust</th>
            <th>Giải thích</th>
        </tr>
        <tr>
            <td>Solution (.sln)</td>
            <td>Workspace</td>
            <td>Tập hợp nhiều dự án con.</td>
        </tr>
        <tr>
            <td>Project (.csproj)</td>
            <td>Crate (Package)</td>
            <td>Một đơn vị biên dịch (Library hoặc Executable).</td>
        </tr>
        <tr>
            <td>NuGet</td>
            <td>Crates.io</td>
            <td>Kho thư viện tập trung.</td>
        </tr>
        <tr>
            <td>bin/obj</td>
            <td>target/</td>
            <td>Nơi chứa file biên dịch xong.</td>
        </tr>
    </table>

    <div class="tip">
        <strong>Thực hành:</strong><br>
        Mở Terminal, di chuyển đến thư mục làm việc của bạn và gõ:
        <pre><code>cargo new hello_rust
cd hello_rust</code></pre>
        Mở thư mục này bằng VS Code. Bạn sẽ thấy cấu trúc như sau:
        <pre><code>hello_rust/
├── Cargo.toml      &lt;-- Tương đương file .csproj + packages.config
├── Cargo.lock      &lt;-- Tương đương packages.lock.json (Cực quan trọng)
├── src/
│   └── main.rs     &lt;-- Tương đương Program.cs
└── target/         &lt;-- (Được tạo ra sau khi build) Tương đương bin/ và obj/</code></pre>
    </div>

    <h3>3. Cargo.toml - "Bộ não" của dự án</h3>
    <p>Trong C#, bạn click chuột phải vào Project → Manage NuGet Packages hoặc sửa file .csproj. Trong Rust, bạn làm việc trực tiếp với <code>Cargo.toml</code>.</p>

    <pre><code>[package]
name = "hello_rust"
version = "0.1.0"
edition = "2021" # Giống như việc chọn .NET 6, .NET 8

[dependencies]
# Khai báo thư viện ở đây. 
# Ví dụ: serde = "1.0" (Tương tự &lt;PackageReference Include="serde" Version="1.0" /&gt;)</code></pre>

    <p><strong>Góc nhìn C#:</strong> File <code>Cargo.toml</code> dễ đọc hơn XML của .csproj rất nhiều. Nó quản lý cả thông tin metadata (tác giả, license) và dependencies.</p>

    <h3>4. IDE: Tạm biệt Visual Studio (tím), xin chào VS Code</h3>
    <p>Visual Studio (bản Full) hỗ trợ Rust chưa thực sự tốt bằng VS Code + Extensions.</p>

    <div class="tip">
        <strong>Setup "Vũ khí" cho VS Code:</strong>
        <ol>
            <li><strong>rust-analyzer:</strong> (Đừng cài cái tên là "Rust" cũ kỹ, hãy cài rust-analyzer). Đây là extension chính chủ, hoạt động như Roslyn bên C#.</li>
            <li><strong>CodeLLDB</strong> (của Vadim Chugunov): Để Debug (đặt Breakpoint, xem biến) y hệt như debug C#.</li>
        </ol>
    </div>

    <h3>5. Quy trình Build & Run: F5 huyền thoại</h3>

    <table>
        <tr><th>Tác vụ</th><th>Lệnh C# (CLI)</th><th>Lệnh Rust</th><th>Ý nghĩa</th></tr>
        <tr><td>Chạy code</td><td>dotnet run</td><td><code>cargo run</code></td><td>Compile và chạy ngay.</td></tr>
        <tr><td>Chỉ build</td><td>dotnet build</td><td><code>cargo build</code></td><td>Compile ra file .exe trong folder target/debug.</td></tr>
        <tr><td>Check lỗi</td><td>(Không có)</td><td><code>cargo check</code></td><td><strong>CỰC HAY.</strong> Kiểm tra code có đúng cú pháp/type không mà không cần tốn thời gian build ra file exe. Tốc độ cực nhanh.</td></tr>
        <tr><td>Build Release</td><td>dotnet publish -c Release</td><td><code>cargo build --release</code></td><td>Tối ưu hóa cực đại (Code chạy nhanh hơn 10-100 lần bản debug), nhưng build lâu hơn.</td></tr>
    </table>

    <h3>6. Bài tập thực hành đầu tiên</h3>

    <p>Chúng ta sẽ viết một chương trình "Hello Rust" nhưng có sử dụng thư viện bên ngoài (để trải nghiệm cảm giác cài NuGet phiên bản Rust).</p>
    <p><strong>Mục tiêu:</strong> In ra dòng chữ Hello với màu sắc (sử dụng thư viện <code>colored</code>).</p>

    <ol>
        <li><strong>Thêm thư viện</strong><br>
            Trong C#, bạn dùng <code>Install-Package colored</code>.<br>
            Trong Rust, tại terminal thư mục dự án, gõ:
            <pre><code>cargo add colored</code></pre>
            (Hãy mở file <code>Cargo.toml</code> ra, bạn sẽ thấy dòng <code>colored = "x.y.z"</code> tự động thêm vào dưới <code>[dependencies]</code>).
        </li>
        <li><strong>Viết code (Sửa file src/main.rs)</strong>
            <pre><code>// using colored; &lt;-- C#
use colored::*; // &lt;-- Rust: Dùng 'use' và dấu '::' thay vì '.'

fn main() {
    // Console.WriteLine("...");
    // Dấu chấm than (!) biểu thị đây là Macro (sẽ giải thích sau), không phải hàm thường.
    println!("Hello, C# Developer asking for Rust!"); 

    // Extension method: Trông y hệt C# phải không?
    let text = "I am learning Rust to catch the Crypto wave!";
    println!("{}", text.red().bold()); 
}</code></pre>
        </li>
        <li><strong>Chạy</strong><br>
            Gõ <code>cargo run</code>.<br>
            Cargo sẽ thực hiện các bước:<br>
            1. Update Registry → 2. Download → 3. Compiling → 4. Running<br>
            <strong>Kết quả:</strong> Bạn sẽ thấy dòng chữ <span style="color:#d32f2f; font-weight:bold;">màu đỏ in đậm</span> trên màn hình.
        </li>
    </ol>

    <div class="summary">
        <h3>TỔNG KẾT BÀI 1</h3>
        <ul style="margin:1rem 0;">
            <li>Cargo là người bạn thân mới, thay thế cho combo (Solution Explorer + NuGet Manager + Build Menu) của Visual Studio.</li>
            <li>Cargo.toml quản lý cấu trình dự án, gọn gàng hơn .csproj.</li>
            <li>VS Code + rust-analyzer là môi trường code tiêu chuẩn hiện nay.</li>
            <li>"cargo check" là lệnh bạn sẽ dùng nhiều nhất để kiểm tra lỗi nhanh.</li>
        </ul>
    </div>

    <p style="font-size:1.2rem; text-align:center; margin:3rem 0;">
        <strong>Bài tập về nhà:</strong><br>
        Hãy thử tạo một project mới, tìm kiếm trên <a href="https://crates.io" target="_blank">crates.io</a> một thư viện tạo số ngẫu nhiên (từ khóa: <strong>rand</strong>), thêm vào <code>Cargo.toml</code> và in ra một số ngẫu nhiên.
    </p>

    <p style="text-align:center; font-size:1.3rem; color:#d32f2f; margin-top:4rem;">
        Hẹn gặp lại bạn ở Bài 2, nơi chúng ta sẽ đối mặt với cú sốc văn hóa đầu tiên:<br>
        <strong>Immutability - Tại sao biến lại không thể... biến đổi?</strong>
    </p>
</body>

</div> <!-- .lesson1-rust -->
